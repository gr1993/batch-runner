<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê´€ë¦¬ì í˜ì´ì§€</title>

    <link rel="stylesheet" href="/css/common.css">
</head>
<body>
    <div class="sidebar">
        <h2>ğŸ›  ê´€ë¦¬ì</h2>
        <div class="nav-item active" onclick="location.href='/';">ê´€ì‹¬ ì •ë¥˜ì†Œ ë³´ê¸°</div>
        <div class="nav-item" onclick="location.href='/job';">ì‘ì—… ê´€ë¦¬</div>
    </div>

    <div class="content">
        <h1>ê´€ì‹¬ ì •ë¥˜ì†Œ ë³´ê¸°</h1>

        <div id="map" style="width:500px;height:400px;"></div>
    </div>

    <!-- appkey : JavaScript í‚¤ (ë˜í•œ ì›¹ í”Œë«í¼ì— ì‚¬ì´íŠ¸ ë„ë©”ì¸ë„ ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ í•¨) -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2b9896e6862ec303926139e843ab9a4e"></script>
    <script>
        var map;

        document.addEventListener("DOMContentLoaded", function() {
            // ì§€ë„ ìƒì„±
            var container = document.getElementById('map');
            var options = {
                center: new kakao.maps.LatLng(33.450701, 126.570667),
                level: 3
            };
            map = new kakao.maps.Map(container, options);

            // ë¸Œë¼ìš°ì €ì˜ ìœ„ì¹˜ ì •ë³´ê¸°ëŠ¥ ì—¬ë¶€ í™•ì¸
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(getCurrentPos);
            } else {
                alert("ì´ ë¸Œë¼ìš°ì €ëŠ” Geolocationì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            }

            // í´ë¦­ ì´ë²¤íŠ¸ ë“±ë¡
            kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
                var position = mouseEvent.latLng;
                addMarker(position, 'stop');
            });
        });

        // ì‚¬ìš©ìì˜ ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ ê²½ìš° í˜¸ì¶œ
        function getCurrentPos(position) {
            // í˜„ì¬ ìœ„ì¹˜ì˜ ìœ„ë„, ê²½ë„
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;

            var position = new kakao.maps.LatLng(lat, lon); // ë§ˆì»¤ ìœ„ì¹˜ (í˜„ì¬ ìœ„ì¹˜)
            addMarker(position);

            // ì¢Œí‘œë¡œ ì§€ë„ ì´ë™
            map.setCenter(position);
        }

        // ì§€ë„ì— ë§ˆì»¤ë¥¼ í‘œì‹œ (ì¹´ì¹´ì˜¤ê°€ ë§ˆì»¤ì´ë¯¸ì§€ë¥¼ ê³µì‹ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ ìƒ˜í”Œì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ì‚¬ì´íŠ¸ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŒ)
        // ì§ì ‘ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì„œ ì •ì ë¦¬ì†ŒìŠ¤ë¡œ í™œìš© (ë‹¤ìš´ë¡œë“œ ë§í¬ : https://www.flaticon.com/search?word=bus)
        var bugImage = "/image/bus.png";
        var stopImage = "/image/bus-stop.png";
        function addMarker(position, type) {
            var markerOption = { position };

            if (type) {
                var image = bugImage;
                switch(type) {
                    case 'stop' : image = stopImage; break;
                }

                var imageSize = new kakao.maps.Size(35, 35);
                var markerImage = new kakao.maps.MarkerImage(image, imageSize);
                markerOption.image = markerImage;
            }

            var marker = new kakao.maps.Marker(markerOption);
            marker.setMap(map);
        }

    </script>

</body>
</html>

